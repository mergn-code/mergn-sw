'use strict';function _0x302e(_0x5d49be,_0x1295e6){var _0x12b4d4=_0x12b4();return _0x302e=function(_0x302e77,_0xb8fce2){_0x302e77=_0x302e77-0x1a2;var _0x1447f5=_0x12b4d4[_0x302e77];return _0x1447f5;},_0x302e(_0x5d49be,_0x1295e6);}(function(_0x4d2acf,_0x43e333){var _0x1768e3=_0x302e,_0x484923=_0x4d2acf();while(!![]){try{var _0x2411ce=-parseInt(_0x1768e3(0x1f3))/0x1*(-parseInt(_0x1768e3(0x1b2))/0x2)+-parseInt(_0x1768e3(0x1ca))/0x3*(-parseInt(_0x1768e3(0x1bb))/0x4)+parseInt(_0x1768e3(0x1d9))/0x5+-parseInt(_0x1768e3(0x1eb))/0x6*(parseInt(_0x1768e3(0x1d6))/0x7)+-parseInt(_0x1768e3(0x1e0))/0x8*(-parseInt(_0x1768e3(0x1e8))/0x9)+parseInt(_0x1768e3(0x1e3))/0xa+-parseInt(_0x1768e3(0x1c0))/0xb;if(_0x2411ce===_0x43e333)break;else _0x484923['push'](_0x484923['shift']());}catch(_0x22e78a){_0x484923['push'](_0x484923['shift']());}}}(_0x12b4,0x35b4b));function _0x12b4(){var _0x332b8a=['No\x20subscription\x20found','startsWith','url','POST','88985kJuHVL','propertyIsEnumerable','waitUntil','action','/device/add-device-token','showNotification','notification','install','Error\x20in\x20recording\x20event','notificationclose','addEventListener','json','INFO:\x20','oldSubscription','stringify','openWindow','Error\x20in\x20notification\x20close\x20event','https://u23z4zsda8.execute-api.ap-southeast-1.amazonaws.com/Prod/sdk-management/api','getSubscription','8fxhhmP','length','https://','Unsubscribed\x20successfully','click','/brand/get-web-push-public-key','throw','Error\x20in\x20push\x20event','452ead4a69d5afc8d453d8157fdf9de9m67rgn1223aa6107e4bddf7747905100758d0c','4uunSeY','apply','close','campaignCustomerInstanceId','Error\x20in\x20notification\x20click\x20event','12054108JQMCSx','focus','registration','data','action1','notificationclick','getOwnPropertySymbols','getOwnPropertyDescriptors','device_id','matchAll','873579nXLJpG','prototype','defineProperty','Notification\x20click\x20event\x20received:','push','Error\x20in\x20activate\x20event','http://','options','value','view','error','pushManager','7IMTMpu','subscribe','parse','2121665nhJuFe','debugLevel','unsubscribe','deviceId','Recording\x20event:','message','defineProperties','48YvPREY','application/json','abcd','116160XCgQwI','toISOString','Error\x20processing\x20event:','skipWaiting','resolve','487467hJZAfm','then','customerId','553518ZkChKw','next','call','window'];_0x12b4=function(){return _0x332b8a;};return _0x12b4();}((()=>{var _0x35f0d7=_0x302e,_0x378031=Object[_0x35f0d7(0x1cc)],_0x2683d9=Object[_0x35f0d7(0x1df)],_0x1c156b=Object[_0x35f0d7(0x1c7)],_0x754040=Object[_0x35f0d7(0x1c6)],_0x59f865=Object['prototype']['hasOwnProperty'],_0x416fec=Object[_0x35f0d7(0x1cb)][_0x35f0d7(0x1f4)],_0x47d1ae=(_0x21c912,_0x1695f6,_0x3a1818)=>_0x1695f6 in _0x21c912?_0x378031(_0x21c912,_0x1695f6,{'enumerable':!0x0,'configurable':!0x0,'writable':!0x0,'value':_0x3a1818}):_0x21c912[_0x1695f6]=_0x3a1818,_0x53a333=(_0x4f2e37,_0x2815af)=>{var _0x579e2a=_0x35f0d7;for(var _0xb8c777 in _0x2815af||(_0x2815af={}))_0x59f865[_0x579e2a(0x1ed)](_0x2815af,_0xb8c777)&&_0x47d1ae(_0x4f2e37,_0xb8c777,_0x2815af[_0xb8c777]);if(_0x754040){for(var _0xb8c777 of _0x754040(_0x2815af))_0x416fec[_0x579e2a(0x1ed)](_0x2815af,_0xb8c777)&&_0x47d1ae(_0x4f2e37,_0xb8c777,_0x2815af[_0xb8c777]);}return _0x4f2e37;},_0x2d56c1=(_0x46badd,_0x16e5bd)=>_0x2683d9(_0x46badd,_0x1c156b(_0x16e5bd)),_0x998fce=(_0xbd5813,_0x209185,_0x475001)=>new Promise((_0x5a3d7d,_0x1634a1)=>{var _0x56b5a9=_0x35f0d7,_0x27be59=_0x5e511e=>{var _0x362505=_0x302e;try{_0x5d335d(_0x475001[_0x362505(0x1ec)](_0x5e511e));}catch(_0x2fdff7){_0x1634a1(_0x2fdff7);}},_0xbf6749=_0x17a69d=>{var _0x15fac3=_0x302e;try{_0x5d335d(_0x475001[_0x15fac3(0x1b8)](_0x17a69d));}catch(_0x25beb3){_0x1634a1(_0x25beb3);}},_0x5d335d=_0x514df5=>_0x514df5['done']?_0x5a3d7d(_0x514df5[_0x56b5a9(0x1d2)]):Promise[_0x56b5a9(0x1e7)](_0x514df5[_0x56b5a9(0x1d2)])['then'](_0x27be59,_0xbf6749);_0x5d335d((_0x475001=_0x475001[_0x56b5a9(0x1bc)](_0xbd5813,_0x209185))[_0x56b5a9(0x1ec)]());}),_0x17ec26,_0x2a1ea0,_0x58c9d4=_0x35f0d7(0x1b0);function _0x3d1e7a(){return _0x998fce(this,null,function*(){var _0x18487f=_0x302e;try{let _0x3b4505=yield self['registration'][_0x18487f(0x1d5)]['getSubscription']();_0x3b4505?(yield _0x3b4505[_0x18487f(0x1db)](),_0x32077d(0x1,_0x18487f(0x1b5))):_0x32077d(0x1,_0x18487f(0x1ef));}catch(_0xa372fa){_0x32077d(0x2,(_0xa372fa==null?void 0x0:_0xa372fa[_0x18487f(0x1de)])||'Error\x20in\x20unsubscribing\x20push\x20manager');}});}function _0x1707eb(_0x49407b){return _0x998fce(this,null,function*(){var _0x5f1289=_0x302e;try{if(_0x32077d(0x1,'Updating\x20subscription\x20details'),yield self[_0x5f1289(0x1c2)][_0x5f1289(0x1d5)][_0x5f1289(0x1b1)]()){_0x32077d(0x1,'Existing\x20subscription\x20found');let _0x5e5714=yield(yield fetch(_0x58c9d4+_0x5f1289(0x1b7),{'headers':{'Authorization':'452ead4a69d5afc8d453d8157fdf9de9m67rgn1223aa6107e4bddf7747905100758d0c','Content-Type':_0x5f1289(0x1e1)},'method':'GET'}))[_0x5f1289(0x1aa)]();return yield _0x3d1e7a(),self[_0x5f1289(0x1c2)]['pushManager']['subscribe']({'applicationServerKey':_0x5e5714[_0x5f1289(0x1c3)],'userVisibleOnly':!0x0})[_0x5f1289(0x1e9)](_0x4443ec=>fetch(_0x58c9d4+_0x5f1289(0x1a3),{'body':JSON[_0x5f1289(0x1ad)]({'device_id':_0x49407b,'is_web_push_subscribed':!0x0,'web_push_subscription_page_url':'/','web_push_token':{'token':JSON[_0x5f1289(0x1d8)](JSON['stringify'](_0x4443ec))}}),'headers':{'Authorization':'452ead4a69d5afc8d453d8157fdf9de9m67rgn1223aa6107e4bddf7747905100758d0c','Content-Type':_0x5f1289(0x1e1)},'method':'PUT'}))['catch'](_0x1dfaba=>{var _0x177921=_0x5f1289;_0x32077d(0x2,(_0x1dfaba==null?void 0x0:_0x1dfaba['message'])||_0x177921(0x1cf));});}}catch(_0x2350e2){_0x32077d(0x2,(_0x2350e2==null?void 0x0:_0x2350e2[_0x5f1289(0x1de)])||_0x5f1289(0x1cf));}return{};});}var _0x32077d=(_0x91444,_0x32c149)=>_0x998fce(void 0x0,null,function*(){var _0x186394=_0x35f0d7;try{if(!_0x17ec26)return;_0x17ec26<=0x3&&(_0x91444===0x1?console['info'](_0x186394(0x1ab)+new Date()[_0x186394(0x1e4)](),_0x32c149):_0x91444===0x2&&console[_0x186394(0x1d4)]('ERROR:\x20'+new Date()[_0x186394(0x1e4)](),_0x32c149));}catch(_0x31681a){console[_0x186394(0x1d4)]((_0x31681a==null?void 0x0:_0x31681a[_0x186394(0x1de)])||'Error\x20in\x20logging\x20debug');}}),_0x89df54=_0x2f210f=>!_0x2f210f[_0x35f0d7(0x1f0)](_0x35f0d7(0x1d0))&&!_0x2f210f[_0x35f0d7(0x1f0)](_0x35f0d7(0x1b4))?_0x35f0d7(0x1d0)+_0x2f210f:_0x2f210f,_0x48fa1d=_0x190521=>_0x998fce(void 0x0,[_0x190521],function*({campaignCustomerInstanceId:_0x3aa0d0,customerId:_0x28310a,error:_0x2843e6,eventId:_0x49d27e,name:_0x370976}){var _0x3d6ce5=_0x35f0d7;try{let _0x28b6ba={'customerId':_0x28310a,'events':[_0x2d56c1(_0x53a333({'campaignCustomerInstanceId':_0x3aa0d0,'eventId':_0x49d27e,'eventProperties':[]},_0x370976?{'name':_0x370976}:{}),{'sessionId':_0x3d6ce5(0x1e2)})]};try{fetch(_0x58c9d4+'/v2/event/record-event',{'body':JSON['stringify'](_0x28b6ba),'headers':{'Authorization':_0x3d6ce5(0x1ba),'Content-Type':_0x3d6ce5(0x1e1)},'method':_0x3d6ce5(0x1f2)});}catch(_0x20cfc3){_0x32077d(0x2,(_0x20cfc3==null?void 0x0:_0x20cfc3[_0x3d6ce5(0x1de)])||_0x3d6ce5(0x1a7));}_0x32077d(0x1,_0x3d6ce5(0x1dd)),_0x32077d(0x1,_0x28b6ba);}catch(_0x1e34df){_0x32077d(0x2,(_0x1e34df==null?void 0x0:_0x1e34df['message'])||_0x3d6ce5(0x1a7));}});self[_0x35f0d7(0x1a9)](_0x35f0d7(0x1de),_0x55b394=>_0x998fce(void 0x0,null,function*(){var _0x53588a=_0x35f0d7;try{let _0x8686fc=_0x55b394[_0x53588a(0x1c3)]?JSON[_0x53588a(0x1d8)](_0x55b394[_0x53588a(0x1c3)]):null;_0x8686fc[_0x53588a(0x1da)]&&(_0x17ec26=_0x8686fc[_0x53588a(0x1da)]),_0x8686fc[_0x53588a(0x1c8)]&&(_0x2a1ea0=_0x8686fc[_0x53588a(0x1c8)]);}catch(_0x381166){console[_0x53588a(0x1d4)](_0x53588a(0x1e5),_0x381166);}})),self[_0x35f0d7(0x1a9)](_0x35f0d7(0x1ce),function(_0x5daa7d){return _0x998fce(this,null,function*(){var _0x3d5a35=_0x302e;try{if(_0x5daa7d[_0x3d5a35(0x1c3)]){let _0x1d9830=_0x5daa7d[_0x3d5a35(0x1c3)][_0x3d5a35(0x1aa)]();_0x32077d(0x1,'Push\x20event\x20data\x20received:'),_0x32077d(0x1,_0x1d9830),_0x5daa7d[_0x3d5a35(0x1f5)](self[_0x3d5a35(0x1c2)][_0x3d5a35(0x1a4)](_0x1d9830['title'],_0x1d9830[_0x3d5a35(0x1d1)])),yield _0x48fa1d({'campaignCustomerInstanceId':_0x1d9830['options']['data'][_0x3d5a35(0x1be)]||'','customerId':''+_0x1d9830[_0x3d5a35(0x1d1)][_0x3d5a35(0x1c3)][_0x3d5a35(0x1ea)],'eventId':0x1b6,'name':_0x3d5a35(0x1d3)}),yield _0x1707eb(_0x1d9830[_0x3d5a35(0x1d1)]['data'][_0x3d5a35(0x1dc)]);}}catch(_0x638596){_0x32077d(0x2,(_0x638596==null?void 0x0:_0x638596[_0x3d5a35(0x1de)])||_0x3d5a35(0x1b9));}});}),self[_0x35f0d7(0x1a9)](_0x35f0d7(0x1c5),function(_0x35538){return _0x998fce(this,null,function*(){var _0x554bb7=_0x302e,_0x48856a;try{if(_0x32077d(0x1,_0x554bb7(0x1cd)),_0x32077d(0x1,(_0x48856a=_0x35538==null?void 0x0:_0x35538[_0x554bb7(0x1a5)])==null?void 0x0:_0x48856a[_0x554bb7(0x1c3)]),_0x35538[_0x554bb7(0x1a5)][_0x554bb7(0x1bd)](),_0x35538['action']!==_0x554bb7(0x1c4)){if(_0x35538[_0x554bb7(0x1a2)]!=='action2'){let _0x5db604=_0x35538[_0x554bb7(0x1a5)][_0x554bb7(0x1c3)][_0x554bb7(0x1f1)];_0x35538[_0x554bb7(0x1f5)](clients[_0x554bb7(0x1c9)]({'includeUncontrolled':!0x0,'type':_0x554bb7(0x1ee)})['then'](function(_0x38a3e6){var _0x23d811=_0x554bb7;let _0x2ecd76=null;for(let _0x158cc5=0x0;_0x158cc5<_0x38a3e6[_0x23d811(0x1b3)];_0x158cc5++){let _0x205e7e=_0x38a3e6[_0x158cc5];if(_0x205e7e[_0x23d811(0x1f1)]===_0x5db604){_0x2ecd76=_0x205e7e;break;}}return _0x2ecd76?_0x2ecd76[_0x23d811(0x1c1)]():clients[_0x23d811(0x1ae)](_0x89df54(_0x5db604));})),_0x48fa1d({'campaignCustomerInstanceId':_0x35538[_0x554bb7(0x1a5)][_0x554bb7(0x1c3)][_0x554bb7(0x1be)]||'','customerId':_0x35538[_0x554bb7(0x1a5)]['data'][_0x554bb7(0x1ea)],'eventId':0x1b7,'name':_0x554bb7(0x1b6)});}}}catch(_0x53d9f7){_0x32077d(0x2,(_0x53d9f7==null?void 0x0:_0x53d9f7['message'])||_0x554bb7(0x1bf));}});}),self[_0x35f0d7(0x1a9)](_0x35f0d7(0x1a8),function(_0x594485){return _0x998fce(this,null,function*(){var _0x3fc777=_0x302e,_0x4e3d13;try{_0x32077d(0x1,'Notification\x20close\x20event\x20received'),_0x32077d(0x1,(_0x4e3d13=_0x594485==null?void 0x0:_0x594485[_0x3fc777(0x1a5)])==null?void 0x0:_0x4e3d13[_0x3fc777(0x1c3)]),_0x48fa1d({'campaignCustomerInstanceId':_0x594485[_0x3fc777(0x1a5)][_0x3fc777(0x1c3)]['campaignCustomerInstanceId']||'','customerId':_0x594485[_0x3fc777(0x1a5)][_0x3fc777(0x1c3)][_0x3fc777(0x1ea)],'eventId':0x1b9,'name':_0x3fc777(0x1bd)});}catch(_0x3f896f){_0x32077d(0x2,(_0x3f896f==null?void 0x0:_0x3f896f[_0x3fc777(0x1de)])||_0x3fc777(0x1af));}});}),self['addEventListener'](_0x35f0d7(0x1a6),function(_0x5c2f7d){var _0xae3566=_0x35f0d7;_0x5c2f7d[_0xae3566(0x1f5)](self[_0xae3566(0x1e6)]());}),self[_0x35f0d7(0x1a9)]('pushsubscriptionchange',_0x11e55c=>_0x998fce(void 0x0,null,function*(){var _0x13bb3f=_0x35f0d7;if(_0x32077d(0x1,'Push\x20subscription\x20change\x20event\x20received:\x20'+JSON[_0x13bb3f(0x1ad)](_0x11e55c)),!_0x2a1ea0)return;let _0x3c97bb=self['registration'][_0x13bb3f(0x1d5)][_0x13bb3f(0x1d7)](_0x11e55c[_0x13bb3f(0x1ac)][_0x13bb3f(0x1d1)])['then'](_0x14b5ed=>fetch(_0x58c9d4+'/device/add-device-token',{'body':JSON[_0x13bb3f(0x1ad)]({'device_id':_0x2a1ea0,'is_web_push_subscribed':!0x0,'web_push_subscription_page_url':'/','web_push_token':JSON['parse'](JSON['stringify'](_0x14b5ed))}),'headers':{'Authorization':_0x13bb3f(0x1ba),'Content-Type':_0x13bb3f(0x1e1)},'method':'POST'}));_0x11e55c[_0x13bb3f(0x1f5)](_0x3c97bb);}),!0x1);})());